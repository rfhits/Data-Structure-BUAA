# 有向无环图及其应用

## 有向无环图(Directed Acycling Graph)

是图中没有回路（环）的有向图。  
是一类具有代表性的图，主要用于研究工程项目的工序问题、工程时间进度问题等。

一个工程(project)都可分为若干个称为活动(active)的子工程(或工序)，各个子工程受到一定的条件约束：  
某个子工程必须开始于另一个子工程完成之后；  
整个工程有一个开始点(起点)和一个终点。

人们关心：

1. 工程能否顺利完成?影响工程的关键活动是什么?

2. 估算整个工程完成所必须的最短时间是多少?

## AOV(Activity On Vertex Network)

对工程的活动加以抽象：  
图中顶点表示活动，有向边表示活动之间的优先关系，  
这样的有向图称为顶点表示活动的网(Activity On Vertex Network)。

### 判断有向图是否存在回路算法

设计到全序偏序等概念，所以简化说明。

一个AOV网，肯定有结点入度为0，这些事件作为整个工程的开始。  
完成了工程的“开始”后，继续做剩下的活动。

将做完的事从AOV网中剔除，剩下的工程，肯定有入度为0的结点，回到开始。

更专业地说，这个叫做“拓扑排序”

![有向图的拓扑排序](/img/1-Notes/6-图/有向图的拓扑排序.png)

#### 算法具体过程

1. 采用正邻接链作为AOV网的存储结构

2. 设立堆栈，用来暂存入度为0的顶点

3. 删除顶点以它为尾的弧：弧头顶点的入度减1。
算法实现

核心就是统计每个点的入度和出度找到出度为0的点，然后删除出度为0的点，删除边、修改入度。

如果在这个过程中，如果找不到出度为0的结点，则含环，过程结束。

#### 算法复杂度分析

设AOV网有n个顶点，e条边，则算法的主要执行是：

1. 统计各顶点的入度：时间复杂度是O(n+e)

2. 入度为0的顶点入栈：时间复杂度是O(n)

3. 排序过程：顶点入栈和出栈操作执行n次，入度减1的操作共执行e次，时间复杂度是O(n+e)

因此，整个算法的时间复杂度是O(n+e)。

## AOE(Activity On Edge)
